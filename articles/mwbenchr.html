<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with {mwbenchr} • mwbenchr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with {mwbenchr}">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mwbenchr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/mwbenchr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction.html">Hands-On mwbenchr</a></li>
    <li><a class="dropdown-item" href="../articles/api_schema.html">API Schema Documentation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/danymukesha/mwbenchr" aria-label="GitHub repository"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting Started with {mwbenchr}</h1>
                        <h4 data-toc-skip class="author">Dany
Mukesha</h4>
            
            <h4 data-toc-skip class="date">2025-08-31</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/danymukesha/mwbenchr/blob/v0.0.1/vignettes/mwbenchr.Rmd" class="external-link"><code>vignettes/mwbenchr.Rmd</code></a></small>
      <div class="d-none name"><code>mwbenchr.Rmd</code></div>
    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      Accessing and integrating data from the Metabolomics Workbench
      (MW) is often cumbersome with the existing tools. This interface
      simplifies programmatic access to MW’s REST API, enabling
      efficient retrieval of study metadata, sample information, and
      compound annotations. By integrating MW’s extensive datasets with
      R, it enhances data exploration, reproducibility, and seamless
      integration into bioinformatics workflows. This tool provides a
      streamlined approach for the users in metabolomics and systems
      biology to analyze large-scale metabolomics data with ease.
    </div>
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <strong>mwbenchr</strong> package provides a R interface to the
Metabolomics Workbench REST API, enabling programmatic access to one of
the largest metabolomics data repositories. This vignette demonstrates
how to use mwbenchr to retrieve study data, compound information, and
perform common metabolomics data analysis tasks.</p>
<div class="section level3">
<h3 id="what-is-metabolomics-workbench">What is Metabolomics Workbench?<a class="anchor" aria-label="anchor" href="#what-is-metabolomics-workbench"></a>
</h3>
<p>The <a href="https://www.metabolomicsworkbench.org/" class="external-link">Metabolomics
Workbench</a> is a public repository for metabolomics data, metadata,
and analysis tools. It contains thousands of studies across various
species, sample types, and analytical platforms, making it an invaluable
resource for metabolomics research.</p>
</div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="set-up-libraries">Set-up libraries<a class="anchor" aria-label="anchor" href="#set-up-libraries"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/danymukesha/mwbenchr" class="external-link">mwbenchr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="creating-a-client">Creating a Client<a class="anchor" aria-label="anchor" href="#creating-a-client"></a>
</h3>
<p>All interactions with the API begin by creating a client object:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Caching enabled client (recommended for repeated queries: enable caching)</span></span>
<span><span class="va">client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mw_rest_client.html">mw_rest_client</a></span><span class="op">(</span>cache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Custom client configuration</span></span>
<span><span class="va">client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mw_rest_client.html">mw_rest_client</a></span><span class="op">(</span></span>
<span>    cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    cache_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    timeout <span class="op">=</span> <span class="fl">60</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Basic client with default settings</span></span>
<span><span class="va">client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mw_rest_client.html">mw_rest_client</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">client</span></span>
<span><span class="co">#&gt; Metabolomics Workbench REST Client</span></span>
<span><span class="co">#&gt;   Base URL: https://www.metabolomicsworkbench.org/rest </span></span>
<span><span class="co">#&gt;   Caching: Disabled </span></span>
<span><span class="co">#&gt;   Timeout: 30 seconds</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exploring-available-endpoints">Exploring Available Endpoints<a class="anchor" aria-label="anchor" href="#exploring-available-endpoints"></a>
</h3>
<p>Get an overview of available functions:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_endpoints.html">list_endpoints</a></span><span class="op">(</span><span class="va">client</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="working-with-studies">Working with Studies<a class="anchor" aria-label="anchor" href="#working-with-studies"></a>
</h2>
<div class="section level3">
<h3 id="discovering-studies">Discovering Studies<a class="anchor" aria-label="anchor" href="#discovering-studies"></a>
</h3>
<p>Start by getting an overview of available studies:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Obtain all studies (this returns a lot of data)</span></span>
<span><span class="va">all_studies</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_summary.html">get_study_summary</a></span><span class="op">(</span><span class="va">client</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">all_studies</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 6</span></span></span>
<span><span class="co">#&gt;   study_id study_title         species institute analysis_type number_of_samples</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ST004148 Surface Acoustic W… Homo s… Universi… LC-MS         42               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ST004144 Metabolic rewiring… Homo s… Brunel U… LC-MS         294              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ST004134 Metabolomic analys… Mus mu… Indian I… LC-MS         13</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">all_studies</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "study_id"          "study_title"       "species"          </span></span>
<span><span class="co">#&gt; [4] "institute"         "analysis_type"     "number_of_samples"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="filtering-and-exploring-studies">Filtering and Exploring Studies<a class="anchor" aria-label="anchor" href="#filtering-and-exploring-studies"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter for human studies</span></span>
<span><span class="va">human_studies</span> <span class="op">&lt;-</span> <span class="va">all_studies</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Human"</span>, <span class="va">study_title</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>        <span class="va">study_id</span>, <span class="va">study_title</span> <span class="co"># , submit_date, last_modified</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># Look for specific topics</span></span>
<span><span class="va">diabetes_studies</span> <span class="op">&lt;-</span> <span class="va">all_studies</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"diabetes|glucose"</span>, <span class="va">study_title</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Found"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">diabetes_studies</span><span class="op">)</span>, <span class="st">"diabetes-related studies"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Found 113 diabetes-related studies"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="getting-detailed-study-information">Getting Detailed Study Information<a class="anchor" aria-label="anchor" href="#getting-detailed-study-information"></a>
</h3>
<p>Once you’ve identified studies of interest, get detailed
information:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get experimental factors (sample metadata) for a study</span></span>
<span><span class="va">study_id</span> <span class="op">&lt;-</span> <span class="st">"ST000001"</span></span>
<span><span class="va">factors</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_factors.html">get_study_factors</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">study_id</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">factors</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   study_id local_sample_id sample_source factors           mb_sample_id raw_data</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ST000001 LabF_115904     Plant         Arabidopsis Geno… SA000019     <span style="color: #949494;">""</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ST000001 LabF_115909     Plant         Arabidopsis Geno… SA000020     <span style="color: #949494;">""</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ST000001 LabF_115914     Plant         Arabidopsis Geno… SA000021     <span style="color: #949494;">""</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ST000001 LabF_115919     Plant         Arabidopsis Geno… SA000022     <span style="color: #949494;">""</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ST000001 LabF_115924     Plant         Arabidopsis Geno… SA000023     <span style="color: #949494;">""</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ST000001 LabF_115929     Plant         Arabidopsis Geno… SA000024     <span style="color: #949494;">""</span></span></span>
<span></span>
<span><span class="co"># Obtain the list of metabolites measured</span></span>
<span><span class="va">metabolites</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_metabolites.html">get_study_metabolites</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">study_id</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">metabolites</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   study_id analysis_id analysis_summary       metabolite_name        refmet_name</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ST000001 AN000001    GCMS positive ion mode 1,2,4-benzenetriol     1,2,4-Trih…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ST000001 AN000001    GCMS positive ion mode 1-monostearin          MG 18:0/0:…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ST000001 AN000001    GCMS positive ion mode 2-hydroxyvaleric acid  2-Hydroxyv…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ST000001 AN000001    GCMS positive ion mode 3-phosphoglycerate     3-Phosphog…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ST000001 AN000001    GCMS positive ion mode 5-hydroxynorvaline NI… 2-Amino-5-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ST000001 AN000001    GCMS positive ion mode adenosine              Adenosine</span></span>
<span></span>
<span><span class="co"># The complete data matrix</span></span>
<span><span class="va">study_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_data.html">get_study_data</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">study_id</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">study_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2448    8</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="advanced-study-search-with-metstat">Advanced Study Search with MetStat<a class="anchor" aria-label="anchor" href="#advanced-study-search-with-metstat"></a>
</h2>
<p>The MetStat functionality allows sophisticated searching across
multiple criteria:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Search for human blood LCMS studies</span></span>
<span><span class="va">human_blood_lcms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_metstat.html">search_metstat</a></span><span class="op">(</span><span class="va">client</span>,</span>
<span>    analysis_type <span class="op">=</span> <span class="st">"LCMS"</span>,</span>
<span>    species <span class="op">=</span> <span class="st">"Human"</span>,</span>
<span>    sample_source <span class="op">=</span> <span class="st">"Blood"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Search for mouse liver studies with any analytical method</span></span>
<span><span class="va">mouse_liver</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_metstat.html">search_metstat</a></span><span class="op">(</span><span class="va">client</span>,</span>
<span>    species <span class="op">=</span> <span class="st">"Mouse"</span>,</span>
<span>    sample_source <span class="op">=</span> <span class="st">"Liver"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Search for studies containing specific metabolites</span></span>
<span><span class="va">glucose_studies</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_metstat.html">search_metstat</a></span><span class="op">(</span><span class="va">client</span>, refmet_name <span class="op">=</span> <span class="st">"Glucose"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Complex search combining multiple criteria</span></span>
<span><span class="va">complex_search</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_metstat.html">search_metstat</a></span><span class="op">(</span><span class="va">client</span>,</span>
<span>    analysis_type <span class="op">=</span> <span class="st">"LCMS"</span>,</span>
<span>    polarity <span class="op">=</span> <span class="st">"POSITIVE"</span>,</span>
<span>    species <span class="op">=</span> <span class="st">"Human"</span>,</span>
<span>    sample_source <span class="op">=</span> <span class="st">"Urine"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="working-with-compounds">Working with Compounds<a class="anchor" aria-label="anchor" href="#working-with-compounds"></a>
</h2>
<div class="section level3">
<h3 id="retrieving-compound-information">Retrieving Compound Information<a class="anchor" aria-label="anchor" href="#retrieving-compound-information"></a>
</h3>
<p>Get detailed information about specific compounds:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get compound by registry number</span></span>
<span><span class="va">compound_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_compound_by_regno.html">get_compound_by_regno</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"1"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">compound_1</span><span class="op">$</span><span class="va">systematic_name</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span></span>
<span><span class="co"># Get compound by PubChem CID</span></span>
<span><span class="va">glucose_pubchem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_compound_by_pubchem_cid.html">get_compound_by_pubchem_cid</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"5793"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get specific fields only</span></span>
<span><span class="va">compound_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_compound_by_regno.html">get_compound_by_regno</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"1"</span>, fields <span class="op">=</span> <span class="st">"name"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get classification hierarchy</span></span>
<span><span class="va">classification</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_compound_classification.html">get_compound_classification</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"regno"</span>, <span class="st">"1"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">classification</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   regno name                                  sys_name lm_category lm_main_class</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1     2-methoxy-12-methyloctadec-17-en-5-y… 2-metho… Fatty Acyl… Other Fatty …</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="downloading-structure-files">Downloading Structure Files<a class="anchor" aria-label="anchor" href="#downloading-structure-files"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download MOL file</span></span>
<span><span class="va">mol_content</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/download_compound_structure.html">download_compound_structure</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"regno"</span>, <span class="st">"1"</span>, <span class="st">"molfile"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Save to file</span></span>
<span><span class="co"># writeLines(mol_content, "glucose.mol")</span></span>
<span></span>
<span><span class="co"># Download SDF format</span></span>
<span><span class="va">sdf_content</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/download_compound_structure.html">download_compound_structure</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"regno"</span>, <span class="st">"1"</span>, <span class="st">"sdf"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="refmet-integration">RefMet Integration<a class="anchor" aria-label="anchor" href="#refmet-integration"></a>
</h2>
<p>RefMet provides standardized metabolite nomenclature:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get RefMet information for a metabolite</span></span>
<span><span class="va">glucose_refmet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_refmet_by_name.html">get_refmet_by_name</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"Glucose"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Standardize alternative names</span></span>
<span><span class="va">standardized</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/standardize_to_refmet.html">standardize_to_refmet</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"D-glucose"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">standardized</span><span class="op">$</span><span class="va">refmet_name</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Glucose"</span></span>
<span></span>
<span><span class="co"># Get all RefMet names (large dataset - use caching!)</span></span>
<span><span class="va">client_cached</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mw_rest_client.html">mw_rest_client</a></span><span class="op">(</span>cache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># all_refmet &lt;- get_all_refmet_names(client_cached)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="mass-spectrometry-tools">Mass Spectrometry Tools<a class="anchor" aria-label="anchor" href="#mass-spectrometry-tools"></a>
</h2>
<div class="section level3">
<h3 id="searching-by-mass">Searching by Mass<a class="anchor" aria-label="anchor" href="#searching-by-mass"></a>
</h3>
<p>Find compounds based on accurate mass measurements:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Search in RefMet database</span></span>
<span><span class="va">mass_matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_by_mass.html">search_by_mass</a></span><span class="op">(</span><span class="va">client</span>,</span>
<span>    db <span class="op">=</span> <span class="st">"REFMET"</span>,</span>
<span>    mz <span class="op">=</span> <span class="fl">180.063</span>,</span>
<span>    ion_type <span class="op">=</span> <span class="st">"M+H"</span>,</span>
<span>    tolerance <span class="op">=</span> <span class="fl">0.01</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mass_matches</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 10</span></span></span>
<span><span class="co">#&gt;   `Input m/z` `Matched m/z` Delta Name  `Systematic name` Formula Ion   Category</span></span>
<span><span class="co">#&gt;         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>        180.          180.  4<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span> 1D-c… (1R,2R,3R,4R,5S,… C6H12O6 Neut… Organic…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>        180.          180.  4<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span> Allo… (3S,4S,5R,6S)-6-… C6H12O6 Neut… Organic…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>        180.          180.  4<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span> D-Ta… (3S,4S,5R)-1,3,4… C6H12O6 Neut… Organic…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>        180.          180.  4<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span> Fruc… (3S,4R,5R)-1,3,4… C6H12O6 Neut… Carbohy…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>        180.          180.  4<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span> Gala… (3R,4S,5R,6R)-6-… C6H12O6 Neut… Carbohy…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>        180.          180.  4<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span> Gluc… (3R,4S,5S,6R)-6-… C6H12O6 Neut… Carbohy…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: `Main class` &lt;chr&gt;, `Sub class` &lt;chr&gt;</span></span></span>
<span></span>
<span><span class="co"># Search in lipids database with different ion type</span></span>
<span><span class="va">lipid_matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_by_mass.html">search_by_mass</a></span><span class="op">(</span><span class="va">client</span>,</span>
<span>    db <span class="op">=</span> <span class="st">"LIPIDS"</span>,</span>
<span>    mz <span class="op">=</span> <span class="fl">760.585</span>,</span>
<span>    ion_type <span class="op">=</span> <span class="st">"M+H"</span>,</span>
<span>    tolerance <span class="op">=</span> <span class="fl">0.05</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare results across databases</span></span>
<span><span class="va">mb_matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_by_mass.html">search_by_mass</a></span><span class="op">(</span><span class="va">client</span>,</span>
<span>    db <span class="op">=</span> <span class="st">"MB"</span>,</span>
<span>    mz <span class="op">=</span> <span class="fl">180.063</span>,</span>
<span>    ion_type <span class="op">=</span> <span class="st">"M+H"</span>,</span>
<span>    tolerance <span class="op">=</span> <span class="fl">0.01</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="calculating-exact-masses">Calculating Exact Masses<a class="anchor" aria-label="anchor" href="#calculating-exact-masses"></a>
</h3>
<p>Calculate theoretical masses for lipid species:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate exact mass for phosphatidylcholine</span></span>
<span><span class="va">pc_mass</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_exact_mass.html">calculate_exact_mass</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"PC(34:1)"</span>, <span class="st">"M+H"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"PC(34:1) [M+H]+ ="</span>, <span class="va">pc_mass</span><span class="op">$</span><span class="va">mz</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "PC(34:1) [M+H]+ = 760.585077"</span></span>
<span></span>
<span><span class="co"># Different ion types</span></span>
<span><span class="va">pc_sodium</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_exact_mass.html">calculate_exact_mass</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"PC(34:1)"</span>, <span class="st">"M+Na"</span><span class="op">)</span></span>
<span><span class="va">pc_negative</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_exact_mass.html">calculate_exact_mass</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"PC(34:1)"</span>, <span class="st">"M-H"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare masses</span></span>
<span><span class="va">mass_comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    ion_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M+H"</span>, <span class="st">"M+Na"</span>, <span class="st">"M-H"</span><span class="op">)</span>,</span>
<span>    exact_mass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">pc_mass</span><span class="op">$</span><span class="va">mz</span>, <span class="va">pc_sodium</span><span class="op">$</span><span class="va">mz</span>, <span class="va">pc_negative</span><span class="op">$</span><span class="va">mz</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mass_comparison</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ion_type exact_mass</span></span>
<span><span class="co">#&gt; 1      M+H   760.5851</span></span>
<span><span class="co">#&gt; 2     M+Na   782.5670</span></span>
<span><span class="co">#&gt; 3      M-H   758.5705</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="data-integration-and-analysis-workflows">Data Integration and Analysis Workflows<a class="anchor" aria-label="anchor" href="#data-integration-and-analysis-workflows"></a>
</h2>
<div class="section level3">
<h3 id="complete-metabolomics-study-analysis">Complete Metabolomics Study Analysis<a class="anchor" aria-label="anchor" href="#complete-metabolomics-study-analysis"></a>
</h3>
<p>Here’s a complete workflow for analyzing a metabolomics study:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Find relevant studies</span></span>
<span><span class="va">studies</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_metstat.html">search_metstat</a></span><span class="op">(</span><span class="va">client</span>,</span>
<span>    analysis_type <span class="op">=</span> <span class="st">"LCMS"</span>,</span>
<span>    species <span class="op">=</span> <span class="st">"Human"</span>,</span>
<span>    sample_source <span class="op">=</span> <span class="st">"Blood"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Select a study of interest</span></span>
<span><span class="va">target_study</span> <span class="op">&lt;-</span> <span class="va">studies</span><span class="op">$</span><span class="va">study</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># 2. Get study metadata</span></span>
<span><span class="va">study_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_summary.html">get_study_summary</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">target_study</span><span class="op">)</span></span>
<span><span class="va">factors</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_factors.html">get_study_factors</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">target_study</span><span class="op">)</span></span>
<span><span class="va">metabolites</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_metabolites.html">get_study_metabolites</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">target_study</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Get the data matrix</span></span>
<span><span class="va">data_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_data.html">get_study_data</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">target_study</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4. Basic data exploration</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Study:"</span>, <span class="va">study_info</span><span class="op">$</span><span class="va">study_title</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Study: Surface Acoustic Wave Hemolysis Assay for Evaluating Stored Red Blood Cells</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Number of samples:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">data_matrix</span><span class="op">)</span> <span class="op">-</span> <span class="fl">7</span>, <span class="st">"\n"</span><span class="op">)</span> <span class="co"># Subs. metadata columns</span></span>
<span><span class="co">#&gt; Number of samples: 1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Number of metabolites:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_matrix</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of metabolites: 7014</span></span>
<span></span>
<span><span class="co"># 5. Data processing</span></span>
<span><span class="va">numeric_data</span> <span class="op">&lt;-</span> <span class="va">data_matrix</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">study_id</span><span class="op">:</span><span class="va">units</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># Remove metadata columns</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">as.numeric</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate basic statistics</span></span>
<span><span class="va">metabolite_stats</span> <span class="op">&lt;-</span> <span class="va">data_matrix</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">metabolite_name</span>, <span class="va">refmet_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></span><span class="op">(</span></span>
<span>        mean_intensity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">numeric_data</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>        cv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">numeric_data</span>, <span class="fl">1</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">metabolite_stats</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   metabolite_name        refmet_name                mean_intensity    cv</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 10-Formyldihydrofolate 10-Formyldihydrofolic acid           <span style="color: #BB0000;">NaN</span>     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 10-Formyldihydrofolate 10-Formyldihydrofolic acid         <span style="text-decoration: underline;">11</span>905.    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 10-Formyldihydrofolate 10-Formyldihydrofolic acid         <span style="text-decoration: underline;">14</span>177.    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 10-Formyldihydrofolate 10-Formyldihydrofolic acid         <span style="text-decoration: underline;">13</span>401.    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 10-Formyldihydrofolate 10-Formyldihydrofolic acid         <span style="text-decoration: underline;">35</span>540.    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 10-Formyldihydrofolate 10-Formyldihydrofolic acid         <span style="text-decoration: underline;">15</span>646.    <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="standardizing-metabolite-names">Standardizing Metabolite Names<a class="anchor" aria-label="anchor" href="#standardizing-metabolite-names"></a>
</h3>
<p>Standardize metabolite names across different studies:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get metabolites from multiple studies</span></span>
<span><span class="va">study1_metabolites</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_metabolites.html">get_study_metabolites</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"ST000001"</span><span class="op">)</span></span>
<span><span class="va">study2_metabolites</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_metabolites.html">get_study_metabolites</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"ST000002"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine and get unique names</span></span>
<span><span class="va">all_metabolite_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="va">study1_metabolites</span><span class="op">$</span><span class="va">metabolite_name</span>,</span>
<span>    <span class="va">study2_metabolites</span><span class="op">$</span><span class="va">metabolite_name</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Standardize names (in practice, you'd do this in batches)</span></span>
<span><span class="va">standardized_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">all_metabolite_names</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="kw">function</span><span class="op">(</span><span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>        <span class="op">{</span></span>
<span>            <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/standardize_to_refmet.html">standardize_to_refmet</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">name</span><span class="op">)</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>                original_name <span class="op">=</span> <span class="va">name</span>,</span>
<span>                refmet_name <span class="op">=</span> <span class="va">result</span><span class="op">$</span><span class="va">refmet_name</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="cn">NA</span>,</span>
<span>                stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>            <span class="op">)</span></span>
<span>        <span class="op">}</span>,</span>
<span>        error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>                original_name <span class="op">=</span> <span class="va">name</span>,</span>
<span>                refmet_name <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>                stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>            <span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">standardization_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">standardized_names</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">standardization_results</span><span class="op">)</span></span>
<span><span class="co">#&gt;             original_name                     refmet_name</span></span>
<span><span class="co">#&gt; 1      1,2,4-benzenetriol         1,2,4-Trihydroxybenzene</span></span>
<span><span class="co">#&gt; 2           1-monostearin                 MG 18:0/0:0/0:0</span></span>
<span><span class="co">#&gt; 3   2-hydroxyvaleric acid           2-Hydroxyvaleric acid</span></span>
<span><span class="co">#&gt; 4      3-phosphoglycerate          3-Phosphoglyceric acid</span></span>
<span><span class="co">#&gt; 5 5-hydroxynorvaline NIST 2-Amino-5-hydroxypentanoic acid</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="cross-study-comparisons">Cross-Study Comparisons<a class="anchor" aria-label="anchor" href="#cross-study-comparisons"></a>
</h3>
<p>Compare metabolite coverage across studies:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get metabolites from multiple studies</span></span>
<span><span class="va">studies_to_compare</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ST000001"</span>, <span class="st">"ST000002"</span>, <span class="st">"ST000003"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">metabolite_coverage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">studies_to_compare</span>, <span class="kw">function</span><span class="op">(</span><span class="va">study_id</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">metabolites</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_metabolites.html">get_study_metabolites</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">study_id</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        study_id <span class="op">=</span> <span class="va">study_id</span>,</span>
<span>        metabolite_count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">metabolites</span><span class="op">)</span>,</span>
<span>        unique_refmet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">metabolites</span><span class="op">$</span><span class="va">refmet_name</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">coverage_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">metabolite_coverage</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">coverage_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;   study_id metabolite_count unique_refmet</span></span>
<span><span class="co">#&gt; 1 ST000001              102            99</span></span>
<span><span class="co">#&gt; 2 ST000002              142           141</span></span>
<span><span class="co">#&gt; 3 ST000003               51            51</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="visualization-examples">Visualization Examples<a class="anchor" aria-label="anchor" href="#visualization-examples"></a>
</h2>
<div class="section level3">
<h3 id="study-statistics">Study Statistics<a class="anchor" aria-label="anchor" href="#study-statistics"></a>
</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visualize study submission over time</span></span>
<span><span class="va">studies_with_dates</span> <span class="op">&lt;-</span> <span class="va">all_studies</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">submit_date</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>        submit_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">submit_date</span><span class="op">)</span>, <span class="st">"%Y"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        analysis_type <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"LCMS"</span>, <span class="va">study_title</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">~</span> <span class="st">"LC-MS"</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"GCMS"</span>, <span class="va">study_title</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">~</span> <span class="st">"GC-MS"</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"NMR"</span>, <span class="va">study_title</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">~</span> <span class="st">"NMR"</span>,</span>
<span>            <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Other"</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">submit_year</span> <span class="op">&gt;=</span> <span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">submit_year</span> <span class="op">&lt;=</span> <span class="fl">2023</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot submissions by year and analysis type</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">studies_with_dates</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">submit_year</span>, fill <span class="op">=</span> <span class="va">analysis_type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>        title <span class="op">=</span> <span class="st">"Metabolomics Workbench Study Submissions by Year"</span>,</span>
<span>        x <span class="op">=</span> <span class="st">"Submission Year"</span>,</span>
<span>        y <span class="op">=</span> <span class="st">"Number of Studies"</span>,</span>
<span>        fill <span class="op">=</span> <span class="st">"Analysis Type"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="mass-accuracy-visualization">Mass Accuracy Visualization<a class="anchor" aria-label="anchor" href="#mass-accuracy-visualization"></a>
</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare mass accuracy across different tolerances</span></span>
<span><span class="va">tolerance_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">0.005</span>, <span class="fl">0.01</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="va">target_mz</span> <span class="op">&lt;-</span> <span class="fl">180.063</span></span>
<span></span>
<span><span class="va">mass_accuracy_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">tolerance_values</span>, <span class="kw">function</span><span class="op">(</span><span class="va">tol</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_by_mass.html">search_by_mass</a></span><span class="op">(</span><span class="va">client</span>, <span class="st">"REFMET"</span>, <span class="va">target_mz</span>, <span class="st">"M+H"</span>, <span class="va">tol</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        tolerance <span class="op">=</span> <span class="va">tol</span>,</span>
<span>        matches <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">matches</span><span class="op">)</span>,</span>
<span>        stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">accuracy_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">mass_accuracy_results</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">accuracy_df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">tolerance</span>, y <span class="op">=</span> <span class="va">matches</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>        title <span class="op">=</span> <span class="st">"Number of Mass Matches vs. Tolerance"</span>,</span>
<span>        x <span class="op">=</span> <span class="st">"Mass Tolerance (Da, log scale)"</span>,</span>
<span>        y <span class="op">=</span> <span class="st">"Number of Matches"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="mwbenchr_files/figure-html/mass-accuracy-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="error-handling-and-best-practices">Error Handling and Best Practices<a class="anchor" aria-label="anchor" href="#error-handling-and-best-practices"></a>
</h2>
<div class="section level3">
<h3 id="robust-api-calls">Robust API Calls<a class="anchor" aria-label="anchor" href="#robust-api-calls"></a>
</h3>
<p>Making safely API calls with retries</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safe_api_call</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">func</span>, <span class="va">...</span>, <span class="va">max_attempts</span> <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">attempt</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">max_attempts</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">result</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>            <span class="op">{</span></span>
<span>                <span class="fu">func</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span>            <span class="op">}</span>,</span>
<span>            error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>                <span class="kw">if</span> <span class="op">(</span><span class="va">attempt</span> <span class="op">==</span> <span class="va">max_attempts</span><span class="op">)</span> <span class="op">{</span></span>
<span>                    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span></span>
<span>                        <span class="st">"API call failed after "</span>, <span class="va">max_attempts</span>, <span class="st">" attempts: "</span>,</span>
<span>                        <span class="va">e</span><span class="op">$</span><span class="va">message</span></span>
<span>                    <span class="op">)</span></span>
<span>                <span class="op">}</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Attempt "</span>, <span class="va">attempt</span>, <span class="st">" failed, retrying..."</span><span class="op">)</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>                <span class="cn">NULL</span></span>
<span>            <span class="op">}</span></span>
<span>        <span class="op">)</span></span>
<span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span>    <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">study_data</span> <span class="op">&lt;-</span> <span class="fu">safe_api_call</span><span class="op">(</span><span class="va">get_study_summary</span>, <span class="va">client</span>, <span class="st">"ST000001"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="batch-processing">Batch Processing<a class="anchor" aria-label="anchor" href="#batch-processing"></a>
</h3>
<p>Processing multiple studies efficiently</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">process_studies</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">client</span>, <span class="va">study_ids</span>, <span class="va">max_concurrent</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">study_ids</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">study_id</span> <span class="op">&lt;-</span> <span class="va">study_ids</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Processing study"</span>, <span class="va">i</span>, <span class="st">"of"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">study_ids</span><span class="op">)</span>, <span class="st">":"</span>, <span class="va">study_id</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>            <span class="op">{</span></span>
<span>                <span class="va">summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_summary.html">get_study_summary</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">study_id</span><span class="op">)</span></span>
<span>                <span class="va">metabolites</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_metabolites.html">get_study_metabolites</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">study_id</span><span class="op">)</span></span>
<span></span>
<span>                <span class="va">results</span><span class="op">[[</span><span class="va">study_id</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                    summary <span class="op">=</span> <span class="va">summary</span>,</span>
<span>                    metabolite_count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">metabolites</span><span class="op">)</span>,</span>
<span>                    metabolites <span class="op">=</span> <span class="va">metabolites</span><span class="op">$</span><span class="va">metabolite_name</span></span>
<span>                <span class="op">)</span></span>
<span></span>
<span>                <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="va">max_concurrent</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>                    <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>                <span class="op">}</span></span>
<span>            <span class="op">}</span>,</span>
<span>            error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>                <span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span><span class="st">"Failed to process study "</span>, <span class="va">study_id</span>, <span class="st">": "</span>, <span class="va">e</span><span class="op">$</span><span class="va">message</span><span class="op">)</span></span>
<span>                <span class="va">results</span><span class="op">[[</span><span class="va">study_id</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>error <span class="op">=</span> <span class="va">e</span><span class="op">$</span><span class="va">message</span><span class="op">)</span></span>
<span>            <span class="op">}</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># simple usage (with a small subset)</span></span>
<span><span class="va">study_subset</span> <span class="op">&lt;-</span> <span class="va">all_studies</span><span class="op">$</span><span class="va">study_id</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="va">batch_results</span> <span class="op">&lt;-</span> <span class="fu">process_studies</span><span class="op">(</span><span class="va">client</span>, <span class="va">study_subset</span><span class="op">)</span></span>
<span><span class="co">#&gt; Processing study 1 of 3 : ST004148 </span></span>
<span><span class="co">#&gt; Processing study 2 of 3 : ST004144 </span></span>
<span><span class="co">#&gt; Processing study 3 of 3 : ST004134</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="performance-optimization">Performance Optimization<a class="anchor" aria-label="anchor" href="#performance-optimization"></a>
</h2>
<div class="section level3">
<h3 id="using-caching">Using Caching<a class="anchor" aria-label="anchor" href="#using-caching"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set up caching for expensive operations</span></span>
<span><span class="va">cached_client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mw_rest_client.html">mw_rest_client</a></span><span class="op">(</span></span>
<span>    cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    cache_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"mwbenchr_cache"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">refmet_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_all_refmet_names.html">get_all_refmet_names</a></span><span class="op">(</span><span class="va">cached_client</span><span class="op">)</span> <span class="co"># Large dataset</span></span>
<span><span class="va">study_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_summary.html">get_study_summary</a></span><span class="op">(</span><span class="va">cached_client</span><span class="op">)</span> <span class="co"># Frequently accessed</span></span>
<span></span>
<span><span class="co"># subsequent calls will use cached data</span></span>
<span><span class="va">refmet_data_cached</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_all_refmet_names.html">get_all_refmet_names</a></span><span class="op">(</span><span class="va">cached_client</span><span class="op">)</span> <span class="co"># Fast!</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="memory-management">Memory Management<a class="anchor" aria-label="anchor" href="#memory-management"></a>
</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For large datasets, process in chunks</span></span>
<span><span class="va">process_large_study</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">client</span>, <span class="va">study_id</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Get metadata first (small)</span></span>
<span>    <span class="va">summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_summary.html">get_study_summary</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">study_id</span><span class="op">)</span></span>
<span>    <span class="va">metabolites</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_metabolites.html">get_study_metabolites</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">study_id</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Check data size before loading full matrix</span></span>
<span>    <span class="va">n_metabolites</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">metabolites</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">n_metabolites</span> <span class="op">&gt;</span> <span class="fl">1000</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span></span>
<span>            <span class="st">"Large study detected ("</span>, <span class="va">n_metabolites</span>, <span class="st">" metabolites). "</span>,</span>
<span>            <span class="st">"Consider processing in chunks."</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="co"># Load full data only if reasonable size</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">n_metabolites</span> <span class="op">&lt;=</span> <span class="fl">5000</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">data_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_study_data.html">get_study_data</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">study_id</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            summary <span class="op">=</span> <span class="va">summary</span>,</span>
<span>            metabolites <span class="op">=</span> <span class="va">metabolites</span>,</span>
<span>            data <span class="op">=</span> <span class="va">data_matrix</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            summary <span class="op">=</span> <span class="va">summary</span>,</span>
<span>            metabolites <span class="op">=</span> <span class="va">metabolites</span>,</span>
<span>            data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>            note <span class="op">=</span> <span class="st">"Data matrix too large - not loaded"</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<details><summary><strong>Session Info</strong>
</summary><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sessioninfo</span><span class="fu">::</span><span class="fu"><a href="https://sessioninfo.r-lib.org/reference/session_info.html" class="external-link">session_info</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">─ Session info ───────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555; font-style: italic;">setting </span> <span style="color: #555555; font-style: italic;">value</span></span></span>
<span><span class="co">#&gt;  version  R version 4.5.1 (2025-06-13)</span></span>
<span><span class="co">#&gt;  os       Ubuntu 24.04.3 LTS</span></span>
<span><span class="co">#&gt;  system   x86_64, linux-gnu</span></span>
<span><span class="co">#&gt;  ui       X11</span></span>
<span><span class="co">#&gt;  language en</span></span>
<span><span class="co">#&gt;  collate  C.UTF-8</span></span>
<span><span class="co">#&gt;  ctype    C.UTF-8</span></span>
<span><span class="co">#&gt;  tz       UTC</span></span>
<span><span class="co">#&gt;  date     2025-08-31</span></span>
<span><span class="co">#&gt;  pandoc   3.1.11 @ /opt/hostedtoolcache/pandoc/3.1.11/x64/ (via rmarkdown)</span></span>
<span><span class="co">#&gt;  quarto   NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">─ Packages ───────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555; font-style: italic;">package     </span> <span style="color: #555555; font-style: italic;">*</span> <span style="color: #555555; font-style: italic;">version</span> <span style="color: #555555; font-style: italic;">date (UTC)</span> <span style="color: #555555; font-style: italic;">lib</span> <span style="color: #555555; font-style: italic;">source</span></span></span>
<span><span class="co">#&gt;  BiocManager    1.30.26 <span style="color: #555555;">2025-06-05</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  BiocStyle    * 2.36.0  <span style="color: #555555;">2025-04-15</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">Bioconduc~</span></span></span>
<span><span class="co">#&gt;  bit            4.6.0   <span style="color: #555555;">2025-03-06</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  bit64          4.6.0-1 <span style="color: #555555;">2025-01-16</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  bookdown       0.44    <span style="color: #555555;">2025-08-21</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  bslib          0.9.0   <span style="color: #555555;">2025-01-30</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  cachem         1.1.0   <span style="color: #555555;">2024-05-16</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  cli            3.6.5   <span style="color: #555555;">2025-04-23</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  crayon         1.5.3   <span style="color: #555555;">2024-06-20</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  curl           7.0.0   <span style="color: #555555;">2025-08-19</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  desc           1.4.3   <span style="color: #555555;">2023-12-10</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  digest         0.6.37  <span style="color: #555555;">2024-08-19</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  dplyr        * 1.1.4   <span style="color: #555555;">2023-11-17</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  evaluate       1.0.5   <span style="color: #555555;">2025-08-27</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  farver         2.1.2   <span style="color: #555555;">2024-05-13</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  fastmap        1.2.0   <span style="color: #555555;">2024-05-15</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  fs             1.6.6   <span style="color: #555555;">2025-04-12</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  generics       0.1.4   <span style="color: #555555;">2025-05-09</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  ggplot2      * 3.5.2   <span style="color: #555555;">2025-04-09</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  glue           1.8.0   <span style="color: #555555;">2024-09-30</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  gtable         0.3.6   <span style="color: #555555;">2024-10-25</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  htmltools      0.5.8.1 <span style="color: #555555;">2024-04-04</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  httr2          1.2.1   <span style="color: #555555;">2025-07-22</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  jquerylib      0.1.4   <span style="color: #555555;">2021-04-26</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  jsonlite       2.0.0   <span style="color: #555555;">2025-03-27</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  knitr          1.50    <span style="color: #555555;">2025-03-16</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  labeling       0.4.3   <span style="color: #555555;">2023-08-29</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  lifecycle      1.0.4   <span style="color: #555555;">2023-11-07</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  magrittr       2.0.3   <span style="color: #555555;">2022-03-30</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  mwbenchr     * 0.0.1   <span style="color: #555555;">2025-08-31</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">local</span></span></span>
<span><span class="co">#&gt;  pillar         1.11.0  <span style="color: #555555;">2025-07-04</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  pkgconfig      2.0.3   <span style="color: #555555;">2019-09-22</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  pkgdown        2.1.3   <span style="color: #555555;">2025-05-25</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">any (@2.1.3)</span></span></span>
<span><span class="co">#&gt;  purrr          1.1.0   <span style="color: #555555;">2025-07-10</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  R6             2.6.1   <span style="color: #555555;">2025-02-15</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  ragg           1.4.0   <span style="color: #555555;">2025-04-10</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  rappdirs       0.3.3   <span style="color: #555555;">2021-01-31</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  RColorBrewer   1.1-3   <span style="color: #555555;">2022-04-03</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  rlang          1.1.6   <span style="color: #555555;">2025-04-11</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  rmarkdown      2.29    <span style="color: #555555;">2024-11-04</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  sass           0.4.10  <span style="color: #555555;">2025-04-11</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  scales         1.4.0   <span style="color: #555555;">2025-04-24</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  sessioninfo    1.2.3   <span style="color: #555555;">2025-02-05</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">any (@1.2.3)</span></span></span>
<span><span class="co">#&gt;  systemfonts    1.2.3   <span style="color: #555555;">2025-04-30</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  textshaping    1.0.1   <span style="color: #555555;">2025-05-01</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  tibble         3.3.0   <span style="color: #555555;">2025-06-08</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  tidyselect     1.2.1   <span style="color: #555555;">2024-03-11</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  tzdb           0.5.0   <span style="color: #555555;">2025-03-15</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  utf8           1.2.6   <span style="color: #555555;">2025-06-08</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  vctrs          0.6.5   <span style="color: #555555;">2023-12-01</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  vroom          1.6.5   <span style="color: #555555;">2023-12-05</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  withr          3.0.2   <span style="color: #555555;">2024-10-28</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  xfun           0.53    <span style="color: #555555;">2025-08-19</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  yaml           2.3.10  <span style="color: #555555;">2024-07-26</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> [1] /home/runner/work/_temp/Library</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> [2] /opt/R/4.5.1/lib/R/site-library</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> [3] /opt/R/4.5.1/lib/R/library</span></span></span>
<span><span class="co">#&gt;  <span style="color: #BBBBBB; background-color: #BB0000;">*</span> ── Packages attached to the search path.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">──────────────────────────────────────────────────────────────────────────────</span></span></span></code></pre></div>
</details>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>We demonstrated the key functionality of <code>mwbenchr</code> for
accessing and analyzing metabolomics data from the Metabolomics
Workbench.</p>
<p>Here are some key takeaways:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Client Setup</strong>: Always start with
<code><a href="../reference/mw_rest_client.html">mw_rest_client()</a></code>, enable caching for better
performance</li>
<li>
<strong>Study Discovery</strong>: Use
<code><a href="../reference/get_study_summary.html">get_study_summary()</a></code> and <code><a href="../reference/search_metstat.html">search_metstat()</a></code> to
find relevant studies</li>
<li>
<strong>Data Retrieval</strong>: Get detailed study information with
study-specific functions</li>
<li>
<strong>Compound Analysis</strong>: Use compound functions and mass
spectrometry tools for molecular identification</li>
<li>
<strong>Name Standardization</strong>: Leverage RefMet for
consistent metabolite naming</li>
<li>
<strong>Best Practices</strong>: Implement error handling, use
caching, and consider rate limiting</li>
</ol>
<p>For more information, see the function documentation
(<code>?function_name</code>) and visit the <a href="https://www.metabolomicsworkbench.org/" class="external-link">Metabolomics Workbench
website</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dany Mukesha.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
